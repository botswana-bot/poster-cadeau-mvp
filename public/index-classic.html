<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Poster cadeau — aperçu MVP</title>
    <link rel="stylesheet" href="/app.css" />
    <style>
      .designSelect{ appearance:none; padding:9px 34px 9px 12px; border-radius:999px; border:1px solid rgba(17,24,39,.12); background:#fff; font-weight:950; font-size:12px; color:rgba(17,24,39,.78); box-shadow:var(--shadow2); cursor:pointer; }
      .designWrap{ position:relative; }
      .designWrap:after{ content:""; position:absolute; right:12px; top:50%; transform:translateY(-40%); width:0;height:0; border-left:5px solid transparent; border-right:5px solid transparent; border-top:6px solid rgba(17,24,39,.55); pointer-events:none; }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="headerInner">
        <a class="brand" href="/"><span class="brandDot"></span>Poster cadeau</a>

        <a class="searchBar" href="/create.html" aria-label="Créer un poster">
          <strong>Poster A4</strong>
          <span class="searchSep"></span>
          <span class="searchGhost">2 aperçus</span>
          <span class="searchSep"></span>
          <span class="searchGhost">Tagline</span>
          <span class="searchBtn" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16Zm11 3-6-6"/></svg>
          </span>
        </a>

        <div class="headerActions">
          <div class="designWrap">
            <select class="designSelect" id="design">
              <option value="classic">Classique</option>
              <option value="airbnb">Airbnb A</option>
              <option value="airbnb-b">Airbnb B</option>
              <option value="airbnb-c">Airbnb C</option>
              <option value="airbnb-d">Airbnb D</option>
              <option value="airbnb-e">Airbnb E</option>
              <option value="airbnb-f">Airbnb F</option>
              <option value="airbnb-g">Airbnb G</option>
            </select>
          </div>
          <a class="pillBtn" href="/about.html">Guide</a>
        </div>
      </div>
    </header>

    <main class="container">
      <h1 class="h1">Trouve ton style.</h1>
      <p class="lead">Tu choisis un style “affiche”, tu écris une tagline, tu vois <b>2 aperçus</b> puis tu commandes.</p>
      <div class="badges">
        <span class="badge">A4</span>
        <span class="badge">19€</span>
        <span class="badge">Livraison en plus</span>
        <span class="badge">France métropolitaine</span>
      </div>

      <div class="cats" aria-label="Catégories">
        <div class="cat"><span class="catDot"></span>Action</div>
        <div class="cat"><span class="catDot"></span>Comédie</div>
        <div class="cat"><span class="catDot"></span>Aventure</div>
        <div class="cat"><span class="catDot"></span>SF</div>
        <div class="cat"><span class="catDot"></span>Magazine</div>
        <div class="cat"><span class="catDot"></span>Vintage</div>
      </div>

      <div id="styles" class="grid"></div>

      <div class="footer">
        Démo visuelle : pas de génération IA réelle, pas de paiement, pas de POD.
      </div>
    </main>

    <script type="module">
      import { STYLES, escapeHtml } from "/app.js";

      const DESIGN_KEY='poster_mvp_design';
      const sel=document.querySelector('#design');
      sel.value = 'classic';
      sel.addEventListener('change', ()=>{ localStorage.setItem(DESIGN_KEY, sel.value); location.href='/'; });

      const el = document.querySelector('#styles');
      const styleThumb = (id) => {
        const map = {
          action: '/assets/poster-action.svg',
          comedy: '/assets/poster-comedy.svg',
          adventure: '/assets/poster-adventure.svg',
          scifi: '/assets/poster-scifi.svg',
          magazine: '/assets/poster-magazine.svg',
          vintage: '/assets/poster-vintage.svg',
        };
        return map[id] || '/assets/poster-action.svg';
      };

      const heart = `
        <span class="heart" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M12 21s-7-4.6-9.2-8.6C1 9 3.2 6.5 6.3 6.5c1.7 0 3.2.9 3.9 2.2.7-1.3 2.2-2.2 3.9-2.2 3.1 0 5.3 2.5 3.5 5.9C19 16.4 12 21 12 21z"/></svg>
        </span>
      `;

      el.innerHTML = STYLES.map(s => `
        <a class="card" href="/create.html" style="display:block">
          <div class="thumb">
            ${heart}
            <img src="${styleThumb(s.id)}" alt="" loading="lazy" />
          </div>
          <div class="cardBody">
            <div class="cardTitle">${escapeHtml(s.name)}</div>
            <p class="cardText">${escapeHtml(s.blurb)}</p>
            <p class="cardText" style="margin-top:8px"><b>2 aperçus</b> • A4</p>
          </div>
        </a>
      `).join('');
    </script>
  </body>
</html>
